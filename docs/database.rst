Database Architecture
=====================


The database is comprised of the following tables:

- 1 to 1 tables
    - users
    - classes
    - events
    - raw_scans
- many to many tables
    - users_events
    - classes_students

users
-----

- **id** (*integer*) -- The Andrews ID number.
- **full_name** (*text*) The user's full name
- **first_name** (*text*) The user's first name
- **last_name** (*text*) The user's last name
- **email** (*text*) The user's email address in the form 'email@andrews.edu'
- **role** (*integer*) 
    1. Student - can view reports for themselves only. Read access
    2. Instructor - includes all read privileges of student, but can also view reports for classes. Update access on rosters and scans
    3. Uploader - includes all read and update privileges of instructor. Can bulk-import scans, students, and rosters by uploading .csv files.

classes
-------

- **id** (*integer*) -- a unique id used to reference this class instance from other tables.
- **name** (*text*) -- the full name of the course
- **acronym** (*text*) -- the course acronym
- **begin_date** (*date*) -- the date the course begins
- **end_date** (*date*) -- the date the course ends

events
------

These attendance-based courses are graded based on event attendance. This table is a catalog of events

- **id** (*integer*) -- a unique id used to reference this event instance from other tables.
- **name** (*text*) -- the full name of the event
- **date** (*date*) -- the date the event occured
- **description** (*text*) -- optional description for this event. Will be displayed in hover-over text in HTML reports
- **type** (*integer*)
    1. eigen_event
    2. sgl_event

raw_scans
---------
These contain blobs of files uploaded from the Motorola CS3000 scanner.

- **id** (*integer*) -- a unique id used to reference this raw scan.
- **event_id** -- a reference to the event this file corresponds to
- **timestamp** (*timestamp*) -- the time at which this file was uploaded
- **data** (*blob*) -- The data in the scan

sgl_scans
---------

- **id** (*integer*) -- a unique id used to reference this SGL scan
- **user_id** (*integer*) -- references the ``user`` table's id
- **event_id** (*integer*) -- references the ``event`` table's id
- **checkpoint** (*integer*) -- the checkpoint attained
- **has_extra_credit** (*bool*) -- whether the student scored extra credit for this checkpoint.
- **timestamp** (*timestamp*) -- the timestamp recorded by the Motorola CS3000 scanner, or when manually entered.
- **rejected** (*bool*) -- allows for an instructor to reject an entry
- **is_manual** (*bool*) -- shows whether this scan was manually entered

eigen_scans
-----------
SGL scan entries are generated by the uploadeer script when a raw_scan is added to an event of type ``eigen event``. This is a many-to-many table and refuses duplicate entries.

- **id** (*integer*) -- a unique id used to reference this Eigen scan
- **user_id** (*integer*) -- references the ``user`` table's id
- **event_id** (*integer*) -- references the ``event`` table's id
- **timestamp** (*timestamp*) -- the timestamp recorded by the Motorola CS3000 scanner, or when manually entered.
- **is_manual** (*bool*) -- shows whether this scan was manually entered.
- **is_rejected** (*bool*) -- allows for an instructor to reject an entry.

student_classes
---------------

.. DANGER:: watch out
   this could be very bad

.. note:: This is a note admonition.
   foo bar zoom
