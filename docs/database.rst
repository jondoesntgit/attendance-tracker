Database Architecture
=====================


The database is comprised of the following tables:

- 1 to 1 tables
    - users
    - classes
    - events
    - raw_scans
- many to many tables
    - users_events
    - classes_students

users
-----

- **id** (_integer_) -- The Andrews ID number.
- **full_name** _(text)_ The user's full name
- **first_name** _(text)_ The user's first name
- **last_name** (_text_) The user's last name
- **email** (_text_) The user's email address in the form 'email@andrews.edu'
- **role** (_integer_) 
    1. Student - can view reports for themselves only. Read access
    2. Instructor - includes all read privileges of student, but can also view reports for classes. Update access on rosters and scans
    3. Uploader - includes all read and update privileges of instructor. Can bulk-import scans, students, and rosters by uploading .csv files.

classes
-------

- **id** (_integer_) -- a unique id used to reference this class instance from other tables.
- **name** _(text)_ -- the full name of the course
- **acronym** _(text)_ -- the course acronym
- **begin_date** _(date)_ -- the date the course begins
- **end_date** _(date)_ -- the date the course ends

events
------

These attendance-based courses are graded based on event attendance. This table is a catalog of events

- **id** (_integer_) -- a unique id used to reference this event instance from other tables.
- **name** _(text)_ -- the full name of the event
- **date** _(date)_ -- the date the event occured
- **description** _(text)_ -- optional description for this event. Will be displayed in hover-over text in HTML reports
- **type** (_integer_)
    1. eigen_event
    2. sgl_event

raw_scans
---------
These contain blobs of files uploaded from the Motorola CS3000 scanner.

- **id** (_integer_) -- a unique id used to reference this raw scan.
- **event_id** -- a reference to the event this file corresponds to
- **timestamp** (_timestamp_) -- the time at which this file was uploaded

sgl_scans
---------

eigen_scans
-----------
SGL scan entries are generated by the uploadeer script when a raw_scan is added to an event of type ``eigen event``. This is a many-to-many table and refuses duplicate entries.

- **usert_id** (_integer_) -- references the ``user`` table's id
- **event_id** (_integer_) -- references the ``event`` table's id
- **timestamp** (_timestamp_) -- the timestamp recorded by the Motorola CS3000 scanner.
- **rejected** (_bool_) -- allows for an instructor to reject an entry.

student_classes
---------------

.. DANGER:: watch out
   this could be very bad

.. note:: This is a note admonition.
   foo bar zoom
